<audio class="voice-over" src="media/_audio/_S_HealthyWater/HFF_VO_HealthyWater.mp3" preload="none" pl-required></audio>
<audio pl-id="correct" class="sfx" src="media/_audio/_S_HealthyWater/HHF_SX_Right.mp3" preload="none" pl-required></audio>
<audio pl-id="incorrect" class="sfx" src="media/_audio/_S_HealthyWater/HHF_SX_Wrong.mp3" preload="none"></audio>
<div class="frame" pl-bg="media/_images/_frames/FR_1.png">
  <img class="words" src="media/_images/_S_HealthyWater/img_4.1.png" draggable=false>
  <div pl-component="multiple-choice" pl-correct="healthy" pl-required>
    <ul class="items" pl-action="answer()">
      <li class="animated" pl-bg="media/_images/_S_HealthyWater/img_4.2.png"></li>
      <li class="animated" pl-id="healthy" pl-bg="media/_images/_S_HealthyWater/img_4.3.png"></li>
    </ul>
  </div>
</div>
<script>
  pl.game.attachScreen(function () {
    this.screen('healthy-water', function () {
      this.on('ui-open', function () {
        this.game.addClass('garbage');
      });

      this.on('ui-close ui-leave', function () {
        this.game.removeClass('garbage');
      });

      this.entity('multiple-choice', function () {
        this.validateAnswer = function () {
          var answers;

          if (this.properties.correct) {
            answers = this.properties.correct.split(/\s*,\s*/);

            if (~answers.indexOf(String(this.getSelected().id()))) {
              this.audio.sfx.correct.play();
              this.complete();
            } else {
              this.audio.sfx.incorrect.play();
            }
          }

          return false;
        };
      });

      this.on('ui-open', function () {
        this.deselect(this.find('.SELECTED'));
      });
    });
  });
</script>
