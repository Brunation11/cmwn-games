<audio class="voice-over" src="media/S_16/VO_16.1.mp3" preload="none" pl-required></audio>
<audio class="background" src="media/S_16/S_16.1.mp3" preload="none"></audio>
<img src="media/S_16/img_16.1.png" draggable=false>
<p>Turn each card.</p>
<div class="bt flip-card" pl-component="selectable" pl-select-state="highlight">
  <audio pl-id="correct" class="sfx" src="media/S_16/S_16.2.mp3" preload="none"></audio>
  <audio pl-id="day" class="voice-over" src="media/S_16/VO_16.2.mp3" preload="none" pl-required pl-dontautoplay></audio>
  <audio pl-id="week" class="voice-over" src="media/S_16/VO_16.3.mp3" preload="none" pl-required pl-dontautoplay></audio>
  <audio pl-id="year" class="voice-over" src="media/S_16/VO_16.4.mp3" preload="none" pl-required pl-dontautoplay></audio>
  <ul class="items" pl-action="select()">
    <li pl-id="day" pl-correct>
      <div class="side b center inline" pl-bg="media/S_16/img_16.2.png"></div>
      <div class="side a center inline" pl-bg="media/S_16/img_16.2.png"></div>
    </li>
    <li pl-id="week" pl-correct>
      <div class="side b center inline" pl-bg="media/S_16/img_16.3.png"></div>
      <div class="side a center inline" pl-bg="media/S_16/img_16.3.png"></div>
    </li>
    <li pl-id="year" pl-correct>
      <div class="side b center inline" pl-bg="media/S_16/img_16.4.png"></div>
      <div class="side a center inline" pl-bg="media/S_16/img_16.4.png"></div>
    </li>
  </ul>
</div>
<script>
  pl.game.attachScreen(function() {
    this.screen('shower', function () {
      this.respond('select', function (_event) {
        var vo;

        if (_event.behaviorTarget.attr('pl-correct') == null) {
          vo = this.audio.sfx.incorrect;
        } else {
          this.highlight(_event.behaviorTarget);
          vo = this.selectable.audio.voiceOver[_event.message];
        }

        if (vo) vo.play();
      });

      this.entity('selectable', function () {

        this.shouldSelect = function (_$target) {
          if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {
            return !this.screen.state(this.STATE.VOICE_OVER);
          }

          return false;
        };

      });

      this.on('ui-open', function (_e) {
        if (!this.is(_e.target)) return;

        this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));
      });
    });
  });
</script>
